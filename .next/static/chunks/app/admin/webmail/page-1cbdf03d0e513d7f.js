(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3004],{6536:(e,a,s)=>{Promise.resolve().then(s.bind(s,8604))},8604:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var t=s(5155),r=s(2115),l=s(63),d=s(2619),i=s.n(d);function n(){let e=(0,l.useRouter)(),[a,s]=(0,r.useState)(!0),[d,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(null),[x,m]=(0,r.useState)("inbox"),[g,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[u,p]=(0,r.useState)({to:"",cc:"",bcc:"",subject:"",body:""});(0,r.useEffect)(()=>{if(!localStorage.getItem("adminToken"))return void e.push("/admin");j()},[e,x]);let j=async()=>{try{let e=localStorage.getItem("adminToken"),a=await fetch("/api/admin/webmail?folder=".concat(x),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();n(e.emails||[])}}catch(e){}finally{s(!1)}},f=async()=>{try{let e=localStorage.getItem("adminToken");(await fetch("/api/admin/webmail/send",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(u)})).ok&&(h(!1),p({to:"",cc:"",bcc:"",subject:"",body:""}),j())}catch(e){}},N=async e=>{if(confirm("Move to trash?"))try{let a=localStorage.getItem("adminToken");await fetch("/api/admin/webmail/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),j(),o(null)}catch(e){}},k=async e=>{try{let a=localStorage.getItem("adminToken");await fetch("/api/admin/webmail/".concat(e,"/star"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a)}}),j()}catch(e){}},v=d.filter(e=>e.subject.toLowerCase().includes(b.toLowerCase())||e.from.toLowerCase().includes(b.toLowerCase())||e.body.toLowerCase().includes(b.toLowerCase())),w={inbox:d.filter(e=>"inbox"===e.folder).length,sent:d.filter(e=>"sent"===e.folder).length,drafts:d.filter(e=>"drafts"===e.folder).length,trash:d.filter(e=>"trash"===e.folder).length,spam:d.filter(e=>"spam"===e.folder).length,unread:d.filter(e=>!e.read&&"inbox"===e.folder).length};return a?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading webmail..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-3xl text-blue-600",children:"mail"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Limitless Webmail"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"info@limitlessinfotech.com"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>h(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"Compose"]}),(0,t.jsx)(i(),{href:"/admin/dashboard",className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"â† Dashboard"})]})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,t.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,t.jsxs)("nav",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>m("inbox"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ".concat("inbox"===x?"bg-blue-50 dark:bg-blue-900/20 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"inbox"}),(0,t.jsx)("span",{className:"font-medium",children:"Inbox"})]}),w.unread>0&&(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded-full",children:w.unread})]}),(0,t.jsxs)("button",{onClick:()=>m("sent"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ".concat("sent"===x?"bg-blue-50 dark:bg-blue-900/20 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"send"}),(0,t.jsx)("span",{className:"font-medium",children:"Sent"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:w.sent})]}),(0,t.jsxs)("button",{onClick:()=>m("drafts"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ".concat("drafts"===x?"bg-blue-50 dark:bg-blue-900/20 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"draft"}),(0,t.jsx)("span",{className:"font-medium",children:"Drafts"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:w.drafts})]}),(0,t.jsxs)("button",{onClick:()=>m("spam"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ".concat("spam"===x?"bg-blue-50 dark:bg-blue-900/20 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"report"}),(0,t.jsx)("span",{className:"font-medium",children:"Spam"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:w.spam})]}),(0,t.jsxs)("button",{onClick:()=>m("trash"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ".concat("trash"===x?"bg-blue-50 dark:bg-blue-900/20 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined",children:"delete"}),(0,t.jsx)("span",{className:"font-medium",children:"Trash"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:w.trash})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Storage"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"2.5 GB / 15 GB"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"16.67%"}})})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"search"}),(0,t.jsx)("input",{type:"text",placeholder:"Search emails...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700 max-h-[calc(100vh-300px)] overflow-y-auto",children:0===v.length?(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-6xl text-gray-400 mb-4",children:"mail"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:b?"No emails found":"No emails in this folder"})]}):v.map(e=>(0,t.jsx)("div",{onClick:()=>o(e),className:"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ".concat((null==c?void 0:c.id)===e.id?"bg-blue-50 dark:bg-blue-900/20":""," ").concat(e.read?"":"font-semibold"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("button",{onClick:a=>{a.stopPropagation(),k(e.id)},className:"mt-1",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-sm ".concat(e.starred?"text-yellow-500":"text-gray-400"),children:e.starred?"star":"star_border"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:e.from}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white truncate mb-1",children:e.subject}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[e.body.substring(0,100),"..."]})]})]})},e.id))})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5",children:c?(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:c.subject}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>k(c.id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Star",children:(0,t.jsx)("span",{className:"material-symbols-outlined ".concat(c.starred?"text-yellow-500":"text-gray-400"),children:c.starred?"star":"star_border"})}),(0,t.jsx)("button",{onClick:()=>N(c.id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"Delete",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-red-600",children:"delete"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"From:"}),(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:c.from})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"To:"}),(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:c.to})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Date:"}),(0,t.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(c.date).toLocaleString()})]})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(0,t.jsx)("p",{className:"whitespace-pre-wrap text-gray-900 dark:text-white",children:c.body})}),c.attachments&&c.attachments.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:["Attachments (",c.attachments.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:c.attachments.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-gray-600 dark:text-gray-400",children:"attach_file"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(e.size/1024).toFixed(2)," KB"]})]})]}),(0,t.jsx)("button",{className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"download"})})]},a))})]})]}),(0,t.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>{h(!0),p({...u,to:c.from,subject:"Re: ".concat(c.subject)})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"reply"}),"Reply"]}),(0,t.jsxs)("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"forward"}),"Forward"]})]})})]}):(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-6xl text-gray-400 mb-4",children:"mail"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Select an email to read"})]})})]})}),g&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"New Message"}),(0,t.jsx)("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:(0,t.jsx)("span",{className:"material-symbols-outlined",children:"close"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To *"}),(0,t.jsx)("input",{type:"email",value:u.to,onChange:e=>p({...u,to:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"recipient@example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CC"}),(0,t.jsx)("input",{type:"email",value:u.cc,onChange:e=>p({...u,cc:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"cc@example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject *"}),(0,t.jsx)("input",{type:"text",value:u.subject,onChange:e=>p({...u,subject:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Email subject"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),(0,t.jsx)("textarea",{value:u.body,onChange:e=>p({...u,body:e.target.value}),rows:12,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Write your message..."})]})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>h(!1),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{onClick:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"send"}),"Send"]})]})]})})]})}}},e=>{e.O(0,[4223,3306,1255,7358],()=>e(e.s=6536)),_N_E=e.O()}]);