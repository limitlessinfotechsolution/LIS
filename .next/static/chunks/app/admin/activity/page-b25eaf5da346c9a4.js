(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2430],{2464:(e,t,a)=>{Promise.resolve().then(a.bind(a,7578))},7578:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),l=a(63),d=a(2619),n=a.n(d);function i(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)([]),[d,i]=(0,s.useState)(!0),[x,c]=(0,s.useState)("all"),[o,g]=(0,s.useState)("");(0,s.useEffect)(()=>{if(!localStorage.getItem("adminToken"))return void e.push("/admin");m()},[e]);let m=async()=>{try{let e=localStorage.getItem("adminToken"),t=await fetch("/api/admin/activity",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();a(e.logs||[])}}catch(e){}finally{i(!1)}},h=t.filter(e=>{let t="all"===x||e.level===x,a=e.message.toLowerCase().includes(o.toLowerCase());return t&&a});return d?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading activity logs..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Log"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"System events and user actions"})]}),(0,r.jsx)(n(),{href:"/admin/dashboard",className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"â† Back to Dashboard"})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Events"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:t.length})]}),(0,r.jsx)("span",{className:"material-symbols-outlined text-4xl text-gray-600",children:"list"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Info"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.filter(e=>"info"===e.level).length})]}),(0,r.jsx)("span",{className:"material-symbols-outlined text-4xl text-blue-600",children:"info"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Warnings"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:t.filter(e=>"warning"===e.level).length})]}),(0,r.jsx)("span",{className:"material-symbols-outlined text-4xl text-yellow-600",children:"warning"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Errors"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-1",children:t.filter(e=>"error"===e.level).length})]}),(0,r.jsx)("span",{className:"material-symbols-outlined text-4xl text-red-600",children:"error"})]})})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"Search logs...",value:o,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>c("all"),className:"px-4 py-2 rounded-lg transition-colors ".concat("all"===x?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"All"}),(0,r.jsx)("button",{onClick:()=>c("info"),className:"px-4 py-2 rounded-lg transition-colors ".concat("info"===x?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Info"}),(0,r.jsx)("button",{onClick:()=>c("warning"),className:"px-4 py-2 rounded-lg transition-colors ".concat("warning"===x?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Warnings"}),(0,r.jsx)("button",{onClick:()=>c("error"),className:"px-4 py-2 rounded-lg transition-colors ".concat("error"===x?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Errors"})]})]})}),0===h.length?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-6xl text-gray-400 mb-4",children:"history"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No logs found"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:o?"Try adjusting your search":"Activity logs will appear here"})]}):(0,r.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-2xl ".concat("error"===e.level?"text-red-600":"warning"===e.level?"text-yellow-600":"text-blue-600"),children:(e=>{switch(e){case"info":return"info";case"warning":return"warning";case"error":return"error";default:return"circle"}})(e.level)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"info":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"warning":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"error":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}})(e.level)),children:e.level.toUpperCase()}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleString()}),e.ip_address&&(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["IP: ",e.ip_address]})]}),(0,r.jsx)("p",{className:"text-gray-900 dark:text-white font-medium mb-2",children:e.message}),e.context&&Object.keys(e.context).length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-sm text-blue-600 cursor-pointer hover:underline",children:"View details"}),(0,r.jsx)("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-700 rounded text-xs overflow-x-auto",children:JSON.stringify(e.context,null,2)})]})]})]})},e.id))})]})]})}}},e=>{e.O(0,[4223,3306,1255,7358],()=>e(e.s=2464)),_N_E=e.O()}]);