(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1093],{2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(2115),i=s(63),l=s(2619),d=s.n(l),n=s(877),c=s(1607);function x(){let e=(0,i.useRouter)(),[t,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)("30d"),[x,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!localStorage.getItem("adminToken"))return void e.push("/admin");g()},[e,l]);let g=async()=>{try{let e=localStorage.getItem("adminToken"),t=await fetch("/api/admin/analytics?range=".concat(l),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();o(e)}}catch(e){}finally{s(!1)}};if(t||!x)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading analytics..."})]})});let m={labels:x.inquiries.trend.map(e=>e.date),datasets:[{label:"Inquiries",data:x.inquiries.trend.map(e=>e.count),borderColor:"rgb(42, 82, 190)",backgroundColor:"rgba(42, 82, 190, 0.1)",fill:!0,tension:.4}]},h={labels:Object.keys(x.inquiries.byStatus),datasets:[{data:Object.values(x.inquiries.byStatus),backgroundColor:["rgba(249, 115, 22, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"],borderWidth:0}]},b={labels:Object.keys(x.inquiries.byService),datasets:[{label:"Inquiries by Service",data:Object.values(x.inquiries.byService),backgroundColor:"rgba(42, 82, 190, 0.8)",borderColor:"rgb(42, 82, 190)",borderWidth:1}]},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Track performance and insights"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"})]}),(0,a.jsx)(d(),{href:"/admin/dashboard",className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"← Back to Dashboard"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inquiries"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:x.inquiries.total}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"+12% from last period"})]}),(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-blue-600",children:"mail"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Newsletter Subscribers"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:x.newsletter.total}),(0,a.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[x.newsletter.active," active"]})]}),(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-green-600",children:"group"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Blog Posts"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:x.blog.totalPosts}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[x.blog.totalViews," views"]})]}),(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-purple-600",children:"article"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bounce Rate"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:[x.traffic.bounceRate,"%"]}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"-5% improvement"})]}),(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-orange-600",children:"trending_down"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inquiry Trend"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(n.N1,{data:m,options:y})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inquiry Status Distribution"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(n.nu,{data:h,options:y})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inquiries by Service"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(n.yP,{data:b,options:y})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Blog Posts"}),(0,a.jsx)("div",{className:"space-y-3",children:x.blog.topPosts.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,a.jsx)(d(),{href:"/blog/".concat(e.slug),target:"_blank",className:"text-sm text-blue-600 hover:underline",children:"View post →"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.views}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"views"})]})]},t))})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Traffic Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.traffic.pageViews.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Page Views"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.traffic.uniqueVisitors.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Unique Visitors"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[x.traffic.bounceRate,"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Bounce Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[Math.floor(x.traffic.avgSessionDuration/60),"m ",x.traffic.avgSessionDuration%60,"s"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Avg. Session"})]})]})]})]})]})}c.t1.register(c.PP,c.kc,c.FN,c.No,c.E8,c.Bs,c.hE,c.m_,c.s$,c.dN)},5857:(e,t,s)=>{Promise.resolve().then(s.bind(s,2917))}},e=>{e.O(0,[5313,4223,603,3306,1255,7358],()=>e(e.s=5857)),_N_E=e.O()}]);